/* jQuery Vortex 1.0.2 | by Luca Fagioli - Montezuma Interactive | http://www.apache.org/licenses/LICENSE-2.0
 */
(function(b){var a=function(d,f){var o;
var k=0;
var m=false;
var w=b(d);
var j=[];
var c=[];
var e=this;
var l=-1;
var h=[];
var v=false;
var g=[];
var u=b.extend({speed:50,clockwise:true,manualAdvance:false,beforeAnimation:null,afterAnimation:null,easing:"end",},f||{});
var q=w.height()/2;
var r=w.width()/2;
var n={currentChild:"",totalChildren:0,checkRadians:new Array(),radians:0};
o=w.children().css("position","absolute");
var t=o.length*4;
var p=1;
o.each(function(x){n.totalChildren++
});
n.radians=(Math.PI*2/n.totalChildren);
var s=(t/2)/Math.PI;
o.each(function(A){var C=b(this).height()/2;
var x=b(this).width()/2;
var B=[];
for(var y=0;
y<t;
y+=1){B.push({top:((1+Math.sin(Math.PI+(y/s)))*q)-C,left:r*(1+Math.cos(y/s))-x})
}var z=A*Math.round(t/o.length);
c[A]=z;
b(this).css({top:B[z].top,left:B[z].left});
h[A]=z;
j.push(B)
});
this.stop=function(){clearInterval(k);
o.stop();
i(false)
};
this.setClockwise=function(x){u.clockwise=x;
if(m){this.start()
}};
var i=function(x){m=x;
if(m===true){w.addClass("vortex-animating");
if(u.beforeAnimation){if(u.beforeAnimation.call()===false){return false
}}}else{w.removeClass("vortex-animating");
if(u.afterAnimation){u.afterAnimation.call(null,b(this))
}}};
this.isAnimating=function(){return m
};
this.reset=function(){if(c[0]==h[0]){return
}v=true;
this.start()
};
this.start=function(z){this.stop();
i(true);
var x;
if(u.clockwise===true){x=-p
}else{x=p
}var y=function(A,B){var D=j[B];
var C=(c[B]+x);
if(C<0){C=t-Math.abs(x)
}if(C>t-1){C=0
}A.animate({left:D[C].left,top:D[C].top},u.speed,"linear",function(){c[B]=C;
if(B==o.length-1){l--
}if(e.isAnimating()){if(v==false||h[B]!=C){if(l==0){e.stop();
l=-1;
return
}y(A,B)
}else{if(B==o.length-1){e.stop();
v=false
}}}})
};
o.each(function(A){y(b(this),A)
})
};
this.setSpeed=function(x){u.speed=x;
if(m){this.start()
}};
if(!u.manualAdvance){this.start()
}this.step=function(x){l=(x*t/o.length);
this.start();
return
}
};
b.fn.vortex=function(c){return this.each(function(){var e=b(this);
if(e.data("vortex")){return
}var d=new a(this,c);
e.data("vortex",d)
})
}
})(jQuery);